import{j as e,c as F,u as M,a as C,r as i,s as x,b as I}from"./index-DIEmpNXl.js";import{B as p}from"./Button.component-i1wl0Rni.js";const E="_card_9bzsa_1",D={card:E},y=({children:r,className:s})=>e.jsx("div",{className:F([D.card,s]),children:r}),S=()=>{const r=M(),{funds:s,inventory:a,level:o,machines:n,priceNail:c,priceMachine:l,stock:t,total:d}=C(),[u,N]=i.useState(10),[j,k]=i.useState(!1),m=i.useRef(0),_=()=>{t<1||(r({funds:s,inventory:a+1,level:o,machines:n,priceNail:c,priceMachine:l,stock:t-1,total:d+1}),m.current+=1)},v=()=>{s>=u&&r({funds:s-u,inventory:a,level:o,machines:n,priceNail:c,priceMachine:l,stock:t+1e3,total:d})},b=()=>{s>=l&&r({funds:s-l,inventory:a,level:o,machines:n+1,priceNail:c,priceMachine:l+.35*n,stock:t,total:d})};return i.useEffect(()=>{const f=setInterval(()=>{t>=n&&(r({funds:s,inventory:a+n,level:o,machines:n,priceNail:c,priceMachine:l,stock:t-n,total:d+n}),m.current=n)},1e3);return()=>clearInterval(f)},[a,n,c,t,d]),i.useEffect(()=>{const f=setInterval(()=>{const P=parseFloat((Math.random()*9.5+.5).toFixed(2));N(P)},5e3);return()=>clearInterval(f)},[]),i.useEffect(()=>{const f=setInterval(()=>{m.current=n},1e3);return()=>clearInterval(f)},[]),i.useEffect(()=>{j&&(console.log("ZZZZ"),t<=100&&v())},[t]),e.jsxs(y,{children:[e.jsx("h2",{children:"Manufacturing"}),e.jsxs("p",{children:["Rendement par seconde : ",m.current]}),e.jsx(p,{className:x.button,onClick:_,children:"Fabriquer clou"}),e.jsxs("p",{children:["Plaques d'acier : ",t]}),e.jsxs("p",{children:["Prix par plaque : ",u.toFixed(2)," €"]}),e.jsxs("div",{children:[e.jsx(p,{className:x.button,disabled:s<u,onClick:v,children:"Acheter acier"}),o>=3?e.jsxs(p,{className:x.button,onClick:()=>k(!j),children:["Auto ",j?"ok":"ko"]}):null]}),o>=2?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Machines automatiques : ",n]}),e.jsx(p,{className:x.button,onClick:b,disabled:t===0||s<l,children:"Acheter machine"}),e.jsxs("p",{children:["Prix par machine : ",l.toFixed(2)," €"]})]}):null]})},g="_total_kh9cr_1",B={total:g},q=()=>{const{t:r}=I(),{total:s}=C();return e.jsxs("h1",{className:B.total,children:[r("game.title")," ",s]})},A=()=>{const r=M(),{funds:s,inventory:a,level:o,machines:n,priceNail:c,priceMachine:l,stock:t,total:d}=C(),[u,N]=i.useState(100),j=()=>{r({funds:s,inventory:a,level:o,machines:n,priceNail:Math.min(c+.01,1),priceMachine:l,stock:t,total:d})},k=()=>{r({funds:s,inventory:a,level:o,machines:n,priceNail:Math.max(c-.01,.01),priceMachine:l,stock:t,total:d})};return i.useEffect(()=>{const m=Math.max(0,100-c*30);N(m)},[c]),i.useEffect(()=>{const m=setInterval(()=>{const _=u/100,v=a*_*2,b=Math.min(a,v);r({funds:s+b*c,inventory:a-b,level:o,machines:n,priceNail:c,priceMachine:l,stock:t,total:d})},1e3);return()=>clearInterval(m)},[a,s,u,c]),e.jsxs(y,{children:[e.jsx("h2",{children:"Business"}),e.jsxs("p",{children:["Fonds disponibles : ",s.toFixed(2)," €"]}),e.jsxs("p",{children:["Inventaire invendu : ",a]}),e.jsxs("p",{children:["Public Demande : ",u.toFixed(2)," %"]}),e.jsxs("div",{children:[e.jsx(p,{className:x.button,onClick:k,children:"Baisser le prix"}),e.jsx(p,{className:x.button,onClick:j,children:"AUgmenter le prix"})]}),e.jsxs("p",{children:["Prix par clou : ",c.toFixed(2)," €"]})]})},G="_dashboard_1uitr_1",Z="_columns_1uitr_6",R="_column_1uitr_6",h={dashboard:G,columns:Z,column:R};function T(){return e.jsxs("div",{className:h.dashboard,children:[e.jsx(q,{}),e.jsxs("div",{className:h.columns,children:[e.jsxs("div",{className:h.column,children:[e.jsx(A,{}),e.jsx(S,{})]}),e.jsx("div",{className:h.column}),e.jsx("div",{className:h.column}),e.jsx("div",{className:h.column})]})]})}export{T as default};
